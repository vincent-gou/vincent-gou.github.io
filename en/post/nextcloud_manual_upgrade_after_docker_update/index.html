<!doctype html><html lang=fr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Manual Nextcloud Upgrade after Nextcloud Docker instance Update</title><style>html body{font-family:raleway,sans-serif;background-color:#656565}:root{--accent: #cc9933;--border-width:  5px }</style><link rel=stylesheet href=https://vincent-gou.fr/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Raleway"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-dark.min.css><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/haskell.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/kotlin.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/scala.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/swift.min.js></script><script>hljs.initHighlightingOnLoad();</script><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script><script>$(document).on('click',function(){$('.collapse').collapse('hide');})</script><meta name=generator content="Hugo 0.78.2"></head><script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><body><a class=flagselect href=/en/post/nextcloud_manual_upgrade_after_docker_update/>enðŸ‡¬ðŸ‡§</a>
<a class=flagnoselect href=/post/nextcloud_manual_upgrade_after_docker_update/>frðŸ‡«ðŸ‡·</a><nav class="navbar navbar-default navbar-fixed-top"><div class=container><div class=navbar-header><a class="navbar-brand visible-xs" href=#>Manual Nextcloud Upgrade after Nextcloud Docker instance Update</a>
<button class=navbar-toggle data-target=.navbar-collapse data-toggle=collapse>
<span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href=/>Home</a></li><li><a href=/project/>Projects</a></li><li><a href=/post/>Articles</a></li><li><a href=/tags/>Tags</a></li><li><a href=/calendar/>Calendar</a></li></ul></div></div></nav><div class=page_info><h4 class=page_info>Translation available:</h4><a href=https://vincent-gou.fr/post/nextcloud_manual_upgrade_after_docker_update/ class=page_info><b>fr</b> Upgrade manuel de Nextcloud aprÃ¨s une mise Ã  jour de l'instance Nextcloud sous Docker /</a></div><h4 class=page_info></h4><h6 class=page_info></br>4 minutes read time</h6><main><div class=item><h4><a href=/en/post/nextcloud_manual_upgrade_after_docker_update/>Manual Nextcloud Upgrade after Nextcloud Docker instance Update</a></h4><h5>March 18, 2019</h5><a href=https://vincent-gou.fr/tags/nextcloud><kbd class=item-tag>nextcloud</kbd></a>
<a href=https://vincent-gou.fr/tags/docker><kbd class=item-tag>docker</kbd></a></div><br><div class=text-justify><h1 id=nextcloud-application-upgrade-after-docker-instance-update-steps>Nextcloud Application Upgrade after Docker instance update steps</h1><p>This document may be used to upgrade nextcloud application after Nextcloud docker instance update.</p><h1 id=pre-requisities>Pre-requisities</h1><ul><li>Docker</li><li>Nextcloud instance</li><li>Linux server</li><li>Nextcloud data and config files in external location</li></ul><h1 id=update-steps>Update steps</h1><h2 id=connect-nextcloud-docker-container>Connect Nextcloud docker container</h2><pre><code>[root@nas docker]# docker exec --user www-data -it nextcloud bash
</code></pre><h2 id=control-nextcloud-version>Control Nextcloud version</h2><pre><code>www-data@e73fd289077c:~/html$ php occ status
Nextcloud or one of the apps require upgrade - only a limited number of commands are available
You may use your browser or the occ upgrade command to do the upgrade
  - installed: true
  - version: 15.0.5.3
  - versionstring: 15.0.5
  - edition:
www-data@e73fd289077c:~/html$ 
</code></pre><h2 id=update-nextcloud>Update Nextcloud</h2><pre><code>www-data@e73fd289077c:~/html$ php occ upgrade
</code></pre><pre><code>Nextcloud or one of the apps require upgrade - only a limited number of commands are available
You may use your browser or the occ upgrade command to do the upgrade
Set log level to debug
Updating database schema
Updated database
Checking for update of app accessibility in appstore
Checked for update of app &quot;accessibility&quot; in appstore
Checking for update of app activity in appstore
Checked for update of app &quot;activity&quot; in appstore
Checking for update of app cloud_federation_api in appstore
Checked for update of app &quot;cloud_federation_api&quot; in appstore
Checking for update of app comments in appstore
Checked for update of app &quot;comments&quot; in appstore
Checking for update of app dav in appstore
Checked for update of app &quot;dav&quot; in appstore
Checking for update of app federatedfilesharing in appstore
Checked for update of app &quot;federatedfilesharing&quot; in appstore
Checking for update of app federation in appstore
Checked for update of app &quot;federation&quot; in appstore
Checking for update of app files in appstore
Checked for update of app &quot;files&quot; in appstore
Checking for update of app files_pdfviewer in appstore
Checked for update of app &quot;files_pdfviewer&quot; in appstore
Checking for update of app files_sharing in appstore
Checked for update of app &quot;files_sharing&quot; in appstore
Checking for update of app files_texteditor in appstore
Checked for update of app &quot;files_texteditor&quot; in appstore
Checking for update of app files_trashbin in appstore
Checked for update of app &quot;files_trashbin&quot; in appstore
Checking for update of app files_versions in appstore
Checked for update of app &quot;files_versions&quot; in appstore
Checking for update of app files_videoplayer in appstore
Checked for update of app &quot;files_videoplayer&quot; in appstore
Checking for update of app firstrunwizard in appstore
Checked for update of app &quot;firstrunwizard&quot; in appstore
Checking for update of app gallery in appstore
Checked for update of app &quot;gallery&quot; in appstore
Checking for update of app logreader in appstore
Checked for update of app &quot;logreader&quot; in appstore
Checking for update of app lookup_server_connector in appstore
Checked for update of app &quot;lookup_server_connector&quot; in appstore
Checking for update of app nextcloud_announcements in appstore
Checked for update of app &quot;nextcloud_announcements&quot; in appstore
Checking for update of app notifications in appstore
Checked for update of app &quot;notifications&quot; in appstore
Checking for update of app oauth2 in appstore
Checked for update of app &quot;oauth2&quot; in appstore
Checking for update of app password_policy in appstore
Checked for update of app &quot;password_policy&quot; in appstore
Checking for update of app provisioning_api in appstore
Checked for update of app &quot;provisioning_api&quot; in appstore
Checking for update of app serverinfo in appstore
Checked for update of app &quot;serverinfo&quot; in appstore
Checking for update of app sharebymail in appstore
Checked for update of app &quot;sharebymail&quot; in appstore
Checking for update of app support in appstore
Checked for update of app &quot;support&quot; in appstore
Checking for update of app survey_client in appstore
Checked for update of app &quot;survey_client&quot; in appstore
Checking for update of app systemtags in appstore
Checked for update of app &quot;systemtags&quot; in appstore
Checking for update of app theming in appstore
Checked for update of app &quot;theming&quot; in appstore
Checking for update of app twofactor_backupcodes in appstore
Checked for update of app &quot;twofactor_backupcodes&quot; in appstore
Checking for update of app updatenotification in appstore
Checked for update of app &quot;updatenotification&quot; in appstore
Checking for update of app workflowengine in appstore
Checked for update of app &quot;workflowengine&quot; in appstore
Starting code integrity check...
Finished code integrity check
Update successful
Maintenance mode is kept active
Reset log level

</code></pre><h2 id=deactivate-maintenance-mode>Deactivate maintenance mode</h2><pre><code>www-data@e73fd289077c:~/html$ php occ maintenance:mode --off
Maintenance mode disabled
www-data@e73fd289077c:~/html$ exit
</code></pre><h2 id=final-setup>Final setup</h2><p>Once update is finished, connect Nextcloud and check plugin app updates manually.</p><p>Some apps may have been disabled during update process.</p><p>You will have to activate them manually.</p><p>Enjoy !</p></div><h4 class=page-header>Author:</h4><figure><img class=avatar src=../../images/vincent.en.png alt><figcaption><a href=https://vincent-gou.fr/en/authors/vincent-gourrierec/>Vincent Gourrierec</a></figcaption></figure></main><footer><p class="copyright text-muted">2020 - Â© All rights reserved. Powered by <a href=https://gohugo.io>Hugo</a> and <a href=https://github.com/calintat/minimal>Minimal</a> theme and [Vincent Gourrierec] (<a href=https://vincent-gou.fr>https://vincent-gou.fr</a>)</p></footer></body></html>