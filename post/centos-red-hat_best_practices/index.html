<!doctype html><html lang=fr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Bonnes pratiques CentOS et Red Hat</title><style>html body{font-family:raleway,sans-serif;background-color:#656565}:root{--accent: #cc9933;--border-width:  5px }</style><link rel=stylesheet href=https://vincent-gou.github.io/css/main.css><link rel=stylesheet href=https://vincent-gou.github.io/css/adoc.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Raleway"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-dark.min.css><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/haskell.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/kotlin.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/scala.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/swift.min.js></script><script>hljs.initHighlightingOnLoad();</script><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script><script>$(document).on('click',function(){$('.collapse').collapse('hide');})</script><meta name=generator content="Hugo 0.78.2"></head><script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><body><a class=flagnoselect href=/en/post/centos-red-hat_best_practices/>enðŸ‡¬ðŸ‡§</a>
<a class=flagselect href=/post/centos-red-hat_best_practices/>frðŸ‡«ðŸ‡·</a><nav class="navbar navbar-default navbar-fixed-top"><div class=container><div class=navbar-header><a class="navbar-brand visible-xs" href=#>Bonnes pratiques CentOS et Red Hat</a>
<button class=navbar-toggle data-target=.navbar-collapse data-toggle=collapse>
<span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href=/>Accueil</a></li><li><a href=/project/>Projets</a></li><li><a href=/post/>Articles</a></li><li><a href=/tags/>Tags</a></li><li><a href=/calendar/>Calendrier</a></li></ul><ul class="nav navbar-nav navbar-right"><li class=navbar-icon><a href=mailto:contact@vincent-gou.fr><i class="fa fa-envelope-o"></i></a></li><li class=navbar-icon><a href=https://github.com/vincent-gou/><i class="fa fa-github"></i></a></li><li class=navbar-icon><a href=https://www.linkedin.com/in/vincent-gou/><i class="fa fa-linkedin"></i></a></li><li class=navbar-icon><a href=https://www.malt.fr/profile/vincentgourrierec/><i class="fa fa-certificate"></i></a></li></ul></div></div></nav><div class=page_info><h4 class=page_info>Traductions disponibles:</h4><a href=https://vincent-gou.github.io/en/post/centos-red-hat_best_practices/ class=page_info><b>en</b> CentOS or Red-Hat best pratices /</a></div><h4 class=page_info>Informations sur la page:</h4><h6 class=page_info>Cet article contient 1446 mots.</br>Comptez 7 minutes de temps de lecture</h6><main><div class=item><h4><a href=/post/centos-red-hat_best_practices/>Bonnes pratiques CentOS et Red Hat</a></h4><h5>July 3, 2020</h5><a href=https://vincent-gou.github.io/tags/centos><kbd class=item-tag>CentOS</kbd></a>
<a href=https://vincent-gou.github.io/tags/red-hat><kbd class=item-tag>Red-Hat</kbd></a>
<a href=https://vincent-gou.github.io/tags/best-pratices><kbd class=item-tag>best-pratices</kbd></a></div><br><div class=text-justify><div class=sect1><h2 id=_objectifs>Objectifs</h2><div class=sectionbody><div class=ulist><ul><li><p>Lister les bonnes pratiques dâ€™installation et dÃ©ploiement des systÃ¨mes dâ€™exploitation CentOS / Red-Hat</p></li></ul></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><div class=title>Note</div></td><td class=content>Ces bonnes pratiques ont Ã©tÃ©es testÃ©es sur CentOS 7 and Red-Hat 7.</td></tr></tbody></table></div></div></div><div class=sect1><h2 id=_yum>YUM</h2><div class=sectionbody><div class=sect2><h3 id=_kernels>Kernels</h3><div class=paragraph><p>Supprimer manuellement ou automatiquement les anciens kernels:
<a href=https://linuxconfig.org/how-to-remove-old-unused-kernels-on-centos-linux class=bare>https://linuxconfig.org/how-to-remove-old-unused-kernels-on-centos-linux</a></p></div></div></div></div><div class=sect1><h2 id=_partitionnement>Partitionnement</h2><div class=sectionbody><div class=sect2><h3 id=_principes_de_partitionnement_lvm>Principes de partitionnement LVM</h3><div class=imageblock><div class=content><svg viewBox="0 0 832 520" xmlns="http://www.w3.org/2000/svg" xmlns:inkspace="http://www.inkscape.org/namespaces/inkscape" xmlns:xlink="http://www.w3.org/1999/xlink" width="832" height="520"><defs id="defs_block"><filter height="1.504" id="filter_blur" inkspace:collect="always" width="1.1575" x="-.07875" y="-.252"><feGaussianBlur id="feGaussianBlur3780" inkspace:collect="always" stdDeviation="4.2"/></filter></defs><title>blockdiag</title><desc>blockdiag { default_node_color = grey; default_textcolor = white; group
physical_disk { textcolor = white; fontsize = 18; label = "Physical disk";
// Set group shape to 'line group' (default is box) shape = line;
orientation = landscape DISK1[shape = flowchart.database]; DISK2[shape =
flowchart.database]; DISK3[shape = flowchart.database]; DISK4[shape =
flowchart.database]; DISK5[shape = flowchart.database]; DISK6[shape =
flowchart.database]; } group pv { textcolor = white; fontsize = 18; label =
"Physical volume"; // Set group shape to 'line group' (default is box) shape
= line; orientation = landscape PV1[shape = flowchart.database]; PV2[shape =
flowchart.database]; PV3[shape = flowchart.database]; PV4[shape =
flowchart.database]; PV5[shape = flowchart.database]; PV6[shape =
flowchart.database]; } group vg1 { textcolor = white; fontsize = 18; label =
"Volume Group"; // Set group shape to 'line group' (default is box) shape =
line; orientation = landscape VG1[shape = flowchart.database]; } group vg2 {
textcolor = white; fontsize = 18; label = "Volume Group"; // Set group shape
to 'line group' (default is box) shape = line; orientation = landscape
VG2[shape = flowchart.database]; } group fs { textcolor = white; fontsize =
18; label = "File Systems"; // Set group shape to 'line group' (default is
box) shape = line; orientation = landscape FS1[shape = note]; FS2[shape =
note]; FS3[shape = note]; FS4[shape = note]; FS5[shape = note]; FS6[shape =
note]; } DISK1 &lt;- PV1; DISK2 &lt;- PV2; DISK3 &lt;- PV3; DISK4 &lt;- PV4;
DISK5 &lt;- PV5; DISK6 &lt;- PV6; PV1 -> VG1; PV2 -> VG1; PV3 ->
VG2; PV4 -> VG2; PV5 -> VG2; PV6 -> VG2; VG1 -> FS1; VG1 ->
FS2; VG2 -> FS3; VG2 -> FS4; VG2 -> FS5; VG2 -> FS6; }</desc><path d="M67 54a64 8 0 01128 0V78A64 8 0 0167 78V54" fill="rgb(0,0,0)" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><path d="M67 134a64 8 0 01128 0v24A64 8 0 0167 158V134" fill="rgb(0,0,0)" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><path d="M67 214a64 8 0 01128 0v24A64 8 0 0167 238V214" fill="rgb(0,0,0)" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><path d="M67 294a64 8 0 01128 0v24A64 8 0 0167 318V294" fill="rgb(0,0,0)" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><path d="M67 374a64 8 0 01128 0v24A64 8 0 0167 398V374" fill="rgb(0,0,0)" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><path d="M67 454a64 8 0 01128 0v24A64 8 0 0167 478V454" fill="rgb(0,0,0)" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><path d="M259 54a64 8 0 01128 0V78A64 8 0 01259 78V54" fill="rgb(0,0,0)" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><path d="M259 134a64 8 0 01128 0v24a64 8 0 01-128 0V134" fill="rgb(0,0,0)" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><path d="M259 214a64 8 0 01128 0v24a64 8 0 01-128 0V214" fill="rgb(0,0,0)" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><path d="M259 294a64 8 0 01128 0v24a64 8 0 01-128 0V294" fill="rgb(0,0,0)" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><path d="M259 374a64 8 0 01128 0v24a64 8 0 01-128 0V374" fill="rgb(0,0,0)" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><path d="M259 454a64 8 0 01128 0v24a64 8 0 01-128 0V454" fill="rgb(0,0,0)" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><path d="M451 54a64 8 0 01128 0V78A64 8 0 01451 78V54" fill="rgb(0,0,0)" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><path d="M451 214a64 8 0 01128 0v24a64 8 0 01-128 0V214" fill="rgb(0,0,0)" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><polygon fill="rgb(0,0,0)" points="643,46 755,46 771,62 771,86 643,86 643,46" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><polygon fill="rgb(0,0,0)" points="643,126 755,126 771,142 771,166 643,166 643,126" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><polygon fill="rgb(0,0,0)" points="643,206 755,206 771,222 771,246 643,246 643,206" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><polygon fill="rgb(0,0,0)" points="643,286 755,286 771,302 771,326 643,326 643,286" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><polygon fill="rgb(0,0,0)" points="643,366 755,366 771,382 771,406 643,406 643,366" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><polygon fill="rgb(0,0,0)" points="643,446 755,446 771,462 771,486 643,486 643,446" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><path d="M64 48a64 8 0 01128 0V72A64 8 0 0164 72V48" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><path d="M192 48A64 8 0 0164 48" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="30" x="128" y="70">DISK1</text><path d="M64 128a64 8 0 01128 0v24A64 8 0 0164 152V128" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><path d="M192 128A64 8 0 0164 128" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="30" x="128" y="150">DISK2</text><path d="M64 208a64 8 0 01128 0v24A64 8 0 0164 232V208" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><path d="M192 208A64 8 0 0164 208" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="30" x="128" y="230">DISK3</text><path d="M64 288a64 8 0 01128 0v24A64 8 0 0164 312V288" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><path d="M192 288A64 8 0 0164 288" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="30" x="128" y="310">DISK4</text><path d="M64 368a64 8 0 01128 0v24A64 8 0 0164 392V368" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><path d="M192 368A64 8 0 0164 368" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="30" x="128" y="390">DISK5</text><path d="M64 448a64 8 0 01128 0v24A64 8 0 0164 472V448" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><path d="M192 448A64 8 0 0164 448" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="30" x="128" y="470">DISK6</text><path d="M256 48a64 8 0 01128 0V72A64 8 0 01256 72V48" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><path d="M384 48A64 8 0 01256 48" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="18" x="320" y="70">PV1</text><path d="M256 128a64 8 0 01128 0v24a64 8 0 01-128 0V128" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><path d="M384 128a64 8 0 01-128 0" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="18" x="320" y="150">PV2</text><path d="M256 208a64 8 0 01128 0v24a64 8 0 01-128 0V208" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><path d="M384 208a64 8 0 01-128 0" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="18" x="320" y="230">PV3</text><path d="M256 288a64 8 0 01128 0v24a64 8 0 01-128 0V288" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><path d="M384 288a64 8 0 01-128 0" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="18" x="320" y="310">PV4</text><path d="M256 368a64 8 0 01128 0v24a64 8 0 01-128 0V368" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><path d="M384 368a64 8 0 01-128 0" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="18" x="320" y="390">PV5</text><path d="M256 448a64 8 0 01128 0v24a64 8 0 01-128 0V448" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><path d="M384 448a64 8 0 01-128 0" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="18" x="320" y="470">PV6</text><path d="M448 48a64 8 0 01128 0V72A64 8 0 01448 72V48" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><path d="M576 48A64 8 0 01448 48" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="18" x="512" y="70">VG1</text><path d="M448 208a64 8 0 01128 0v24a64 8 0 01-128 0V208" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><path d="M576 208a64 8 0 01-128 0" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="18" x="512" y="230">VG2</text><polygon fill="rgb(128,128,128)" points="640,40 752,40 768,56 768,80 640,80 640,40" stroke="rgb(0,0,0)"/><path d="M752 40V56" fill="none" stroke="rgb(0,0,0)"/><path d="M752 56h16" fill="none" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="18" x="704" y="66">FS1</text><polygon fill="rgb(128,128,128)" points="640,120 752,120 768,136 768,160 640,160 640,120" stroke="rgb(0,0,0)"/><path d="M752 120v16" fill="none" stroke="rgb(0,0,0)"/><path d="M752 136h16" fill="none" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="18" x="704" y="146">FS2</text><polygon fill="rgb(128,128,128)" points="640,200 752,200 768,216 768,240 640,240 640,200" stroke="rgb(0,0,0)"/><path d="M752 2e2v16" fill="none" stroke="rgb(0,0,0)"/><path d="M752 216h16" fill="none" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="18" x="704" y="226">FS3</text><polygon fill="rgb(128,128,128)" points="640,280 752,280 768,296 768,320 640,320 640,280" stroke="rgb(0,0,0)"/><path d="M752 280v16" fill="none" stroke="rgb(0,0,0)"/><path d="M752 296h16" fill="none" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="18" x="704" y="306">FS4</text><polygon fill="rgb(128,128,128)" points="640,360 752,360 768,376 768,400 640,400 640,360" stroke="rgb(0,0,0)"/><path d="M752 360v16" fill="none" stroke="rgb(0,0,0)"/><path d="M752 376h16" fill="none" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="18" x="704" y="386">FS5</text><polygon fill="rgb(128,128,128)" points="640,440 752,440 768,456 768,480 640,480 640,440" stroke="rgb(0,0,0)"/><path d="M752 440v16" fill="none" stroke="rgb(0,0,0)"/><path d="M752 456h16" fill="none" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="18" x="704" y="466">FS6</text><path d="M2e2 60h56" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="193,60 200,56 200,64 193,60" stroke="rgb(0,0,0)"/><path d="M2e2 140h56" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="193,140 200,136 200,144 193,140" stroke="rgb(0,0,0)"/><path d="M2e2 220h56" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="193,220 200,216 200,224 193,220" stroke="rgb(0,0,0)"/><path d="M2e2 3e2h56" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="193,300 200,296 200,304 193,300" stroke="rgb(0,0,0)"/><path d="M2e2 380h56" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="193,380 200,376 200,384 193,380" stroke="rgb(0,0,0)"/><path d="M2e2 460h56" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="193,460 200,456 200,464 193,460" stroke="rgb(0,0,0)"/><path d="M384 60h56" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="447,60 440,56 440,64 447,60" stroke="rgb(0,0,0)"/><path d="M384 140h48" fill="none" stroke="rgb(0,0,0)"/><path d="M432 140V60" fill="none" stroke="rgb(0,0,0)"/><path d="M432 60h8" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="447,60 440,56 440,64 447,60" stroke="rgb(0,0,0)"/><path d="M384 220h56" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="447,220 440,216 440,224 447,220" stroke="rgb(0,0,0)"/><path d="M384 3e2h48" fill="none" stroke="rgb(0,0,0)"/><path d="M432 3e2V220" fill="none" stroke="rgb(0,0,0)"/><path d="M432 220h8" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="447,220 440,216 440,224 447,220" stroke="rgb(0,0,0)"/><path d="M384 380h48" fill="none" stroke="rgb(0,0,0)"/><path d="M432 380V220" fill="none" stroke="rgb(0,0,0)"/><path d="M432 220h8" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="447,220 440,216 440,224 447,220" stroke="rgb(0,0,0)"/><path d="M384 460h48" fill="none" stroke="rgb(0,0,0)"/><path d="M432 460V220" fill="none" stroke="rgb(0,0,0)"/><path d="M432 220h8" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="447,220 440,216 440,224 447,220" stroke="rgb(0,0,0)"/><path d="M576 60h56" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="639,60 632,56 632,64 639,60" stroke="rgb(0,0,0)"/><path d="M576 60h32" fill="none" stroke="rgb(0,0,0)"/><path d="M608 60v80" fill="none" stroke="rgb(0,0,0)"/><path d="M608 140h24" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="639,140 632,136 632,144 639,140" stroke="rgb(0,0,0)"/><path d="M576 220h56" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="639,220 632,216 632,224 639,220" stroke="rgb(0,0,0)"/><path d="M576 220h32" fill="none" stroke="rgb(0,0,0)"/><path d="M608 220v80" fill="none" stroke="rgb(0,0,0)"/><path d="M608 3e2h24" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="639,300 632,296 632,304 639,300" stroke="rgb(0,0,0)"/><path d="M576 220h32" fill="none" stroke="rgb(0,0,0)"/><path d="M608 220V380" fill="none" stroke="rgb(0,0,0)"/><path d="M608 380h24" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="639,380 632,376 632,384 639,380" stroke="rgb(0,0,0)"/><path d="M576 220h32" fill="none" stroke="rgb(0,0,0)"/><path d="M608 220V460" fill="none" stroke="rgb(0,0,0)"/><path d="M608 460h24" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="639,460 632,456 632,464 639,460" stroke="rgb(0,0,0)"/><rect fill="none" height="460" stroke="rgb(243,152,0)" stroke-width="3" width="144" x="56" y="30"/><rect fill="none" height="460" stroke="rgb(243,152,0)" stroke-width="3" width="144" x="248" y="30"/><rect fill="none" height="60" stroke="rgb(243,152,0)" stroke-width="3" width="144" x="440" y="30"/><rect fill="none" height="60" stroke="rgb(243,152,0)" stroke-width="3" width="144" x="440" y="190"/><rect fill="none" height="460" stroke="rgb(243,152,0)" stroke-width="3" width="144" x="632" y="30"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="99" x="128.5" y="37">Physical disk</text><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="114" x="320" y="37">Physical volume</text><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="91" x="512.5" y="37">Volume Group</text><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="91" x="512.5" y="197">Volume Group</text><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="91" x="704.5" y="37">File Systems</text></svg></div></div><div class=paragraph><p>Le partitionnement correct de votre systÃ¨me est dÃ©pendant de lâ€™utilisation que vous en ferez et des spÃ©cificitÃ©s des services qui y seront dÃ©ployÃ©s.
Il faut prÃ©voir dans tous les cas le partitionnement minimum suivant:</p></div><div class=ulist><ul><li><p>/ =â‡’ 2048 Mio voire moins (LVM et FS formattÃ© en XFS ou EXT4)</p></li><li><p>/usr =â‡’ 4096 Mio (LVM et FS formattÃ© en XFS ou EXT4)</p></li><li><p>/var =â‡’ 2048 Ã  4096 Mio (LVM et FS formattÃ© en XFS ou EXT4)</p></li><li><p>/tmp =â‡’ 512 Ã  2048 Mio (LVM et FS formattÃ© en XFS ou EXT4)</p></li><li><p>/boot =â‡’ 512 Ã  1024 Mio en (LVM et FS formattÃ© en XFS ou EXT4)</p></li></ul></div></div></div></div><div class=sect1><h2 id=_rÃ©seau>RÃ©seau</h2><div class=sectionbody><div class=sect2><h3 id=_serveur_de_temps_ntp>Serveur de temps NTP</h3><div class=paragraph><p>Lors de lâ€™installation de lâ€™OS vous avez du spÃ©cifier le fuseau horaire. Sâ€™il nâ€™est pas correct ou si vous souhaitez connaitre la valeur actuelle, saisissez la commande suivante:</p></div><div class=sect3><h4 id=_valeur_actuelle>Valeur actuelle</h4><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>[root@test-server:] # timedatectl</code></pre></div></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>[root@test-server:] # timedatectl
      Local time: Mon 2020-07-06 16:08:16 CEST
  Universal time: Mon 2020-07-06 14:08:16 UTC
        RTC time: Mon 2020-07-06 14:08:16
       Time zone: Europe/Paris (CEST, +0200)
     NTP enabled: yes
NTP synchronized: yes
 RTC in local TZ: no
      DST active: yes
 Last DST change: DST began at
                  Sun 2020-03-29 01:59:59 CET
                  Sun 2020-03-29 03:00:00 CEST
 Next DST change: DST ends (the clock jumps one hour backwards) at
                  Sun 2020-10-25 02:59:59 CEST
                  Sun 2020-10-25 02:00:00 CET
[root@test-server:] #</code></pre></div></div></div><div class=sect3><h4 id=_modification_du_fuseau_horaire>Modification du fuseau horaire</h4><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>[root@test-server:] # sudo imedatectl set-timezone Europe/Paris</code></pre></div></div><div class=paragraph><p>VÃ©rifiez le changement de fuseau horaire</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>[root@test-server:] # timedatectl
      Local time: Mon 2020-07-06 16:08:16 CEST
  Universal time: Mon 2020-07-06 14:08:16 UTC
        RTC time: Mon 2020-07-06 14:08:16
       Time zone: Europe/Paris (CEST, +0200)
     NTP enabled: yes
NTP synchronized: yes
 RTC in local TZ: no
      DST active: yes
 Last DST change: DST began at
                  Sun 2020-03-29 01:59:59 CET
                  Sun 2020-03-29 03:00:00 CEST
 Next DST change: DST ends (the clock jumps one hour backwards) at
                  Sun 2020-10-25 02:59:59 CEST
                  Sun 2020-10-25 02:00:00 CET
[root@test-server:] #</code></pre></div></div></div></div><div class=sect2><h3 id=_dÃ©sactivation_ipv6>DÃ©sactivation IPV6</h3><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>[root@test-server:] echo &#34;net.ipv6.conf.all.disable_ipv6 = 1&#34; &gt; /etc/sysctl.d/01-disable_IPV6.conf
[root@test-server:] echo &#34;net.ipv6.conf.default.disable_ipv6 = 1&#34; &gt;&gt; /etc/sysctl.d/01-disable_IPV6.conf
[root@test-server:] sysctl -p
[root@test-server:] echo &#34;AddressFamily inet&#34; &gt;&gt; /etc/ssh/sshd_config
[root@test-server:] service sshd restart</code></pre></div></div></div><div class=sect2><h3 id=_dÃ©sactivation_networkmanager>DÃ©sactivation NetworkManager</h3><div class=paragraph><p>Network Manager est installÃ© et actif par dÃ©faut.
Vous pouvez controlez la configuration rÃ©seau en gÃ©rant les fichiers de configuration sous /etc/sysconfig/network-scripts.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>[root@test-server:] systemctl disable NetworkManager
[root@test-server:] systemctl stop NetworkManager</code></pre></div></div></div><div class=sect2><h3 id=_corrÃ©lation_carte_rÃ©seau_et_adresse_mac>CorrÃ©lation carte rÃ©seau et adresse MAC</h3><div class=paragraph><p>Cette commande vous permettra dâ€™afficher pour chaque carte rÃ©seau physique son adresse MAC.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>[root@test-server:] for i in $(find /sys/class/net/* -not -lname &#34;*virtual*&#34; | sed -e &#34;s/\// /g&#34; | awk &#39;{print $4}&#39; ); do MAC=$(cat /sys/class/net/$i/address);echo $i: $MAC; done</code></pre></div></div><div class=paragraph><p>Retour affichÃ© de la commande: (Machine virtuelle avec 4 cartes rÃ©seau):</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>enp0s10: 08:00:27:34:a7:5b
enp0s3: 08:00:27:22:1d:03
enp0s8: 08:00:27:35:a8:74
enp0s9: 08:00:27:66:62:47</code></pre></div></div></div><div class=sect2><h3 id=_rennomage_carte_rÃ©seau_physique_enpxsy_vers_ethx>Rennomage carte rÃ©seau physique enpXsY vers ethX</h3><div class=paragraph><p>Script tout en un:</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><div class=title>Warning</div></td><td class=content>Sauvegardez vos fichiers de configuration rÃ©seau.</td></tr></tbody></table></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>[root@test-server:] inc=&#34;0&#34;;for i in $(find /sys/class/net/* -not -lname &#34;*virtual*&#34; | \
sed -e &#34;s/\// /g&#34; | \
awk &#39;{print $4}&#39; ); do inc=$((inc+1));\
MAC=$(cat /sys/class/net/$i/address) ; \
rm -f /etc/sysconfig/network-scripts/ifcfg-eth$inc;\
echo &#34;HWADDR=$MAC&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-eth$inc ;\
cat /etc/sysconfig/network-scripts/ifcfg-$i &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-eth$inc; \
sed -i &#34;s/$i/eth$inc/g&#34; /etc/sysconfig/network-scripts/ifcfg-eth$inc ;\
mv /etc/sysconfig/network-scripts/ifcfg-$i /etc/sysconfig/network-scripts/ifcfg-$i.old.bkp;\
done</code></pre></div></div></div><div class=sect2><h3 id=_script_de_crÃ©ation_de_team_serveurs_physique>Script de crÃ©ation de Team (Serveurs Physique):</h3><div class=paragraph><p>Script tout en un:</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><div class=title>Warning</div></td><td class=content>Sauvegardez vos fichiers de configuration rÃ©seau.</td></tr></tbody></table></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>[root@test-server:] inc=&#34;0&#34;;for i in $(find /sys/class/net/* -not -lname &#34;*virtual*&#34; | \
sed -e &#34;s/\// /g&#34; | \
awk &#39;{print $4}&#39; ); do inc=$((inc+1));\
MAC=$(cat /sys/class/net/$i/address) ; \
rm -f /etc/sysconfig/network-scripts/ifcfg-eth$inc;\
echo &#34;HWADDR=$MAC&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-eth$inc ;\
echo &#34;DEVICE=eth$inc&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-eth$inc ;\
echo &#34;NAME=eth$inc&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-eth$inc ;\
echo &#34;DEVICETYPE=TeamPort&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-eth$inc ;\
echo &#34;ONBOOT=yes&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-eth$inc ;\
echo &#34;TEAM_MASTER=team0&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-eth$inc ;\
echo &#34;NM_CONTROLLED=no&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-eth$inc ;\
done;\
rm -f /etc/sysconfig/network-scripts/ifcfg-team0;\
echo &#34;DEVICE=team0&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-team0 ;\
echo &#34;DEVICETYPE=Team&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-team0 ;\
echo &#34;ONBOOT=yes&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-team0 ;\
echo &#34;BOOTPROTO=none&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-team0 ;\
echo &#34;NM_CONTROLLED=no&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-team0 ;\
echo &#34;IPADDR=10.99.0.51&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-team0 ;\
echo &#34;GATEWAY=10.99.2.254&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-team0 ;\
echo &#34;PREFIX=16&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-team0 ;\
echo &#34;TEAM_CONFIG=&#39;{\&#34;runner\&#34;: {\&#34;name\&#34;: \&#34;loadbalance\&#34;}, \&#34;link_watch\&#34;: {\&#34;name\&#34;: \&#34;ethtool\&#34;} }&#39;&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-team0 ;\
ifup team0;</code></pre></div></div></div><div class=sect2><h3 id=_script_de_crÃ©ation_de_team_serveurs_virtuels>Script de crÃ©ation de Team (Serveurs Virtuels):</h3><div class=paragraph><p>Pour les machines virtuelles il est nÃ©cessaire de procÃ©der Ã  un petit hack afin de permettre un bon fonctionnement du balancing des cartes rÃ©seau dans la team.
Par ce que le mode promiscuitÃ© nâ€™est pas gÃ©rÃ© depuis CentOS / RedHat 7 il faudra Ã©galement ajouter un service systemd pour prise en compte Ã  chaque redÃ©marrage.
Pour VirtualBox par exemple, configurez tel que le screenshot ci-dessous:</p></div><div class=imageblock><div class=content><img src=../images/Best_Pratices_CentOS-RedHat-d690f.png alt="Best Pratices CentOS RedHat d690f"></div></div><div class=paragraph><p>Script tout en un:</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><div class=title>Warning</div></td><td class=content>Sauvegardez vos fichiers de configuration rÃ©seau.</td></tr></tbody></table></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>[root@test-server:] inc=&#34;0&#34;;for i in $(find /sys/class/net/* -not -lname &#34;*virtual*&#34; | \
sed -e &#34;s/\// /g&#34; | \
awk &#39;{print $4}&#39; ); do inc=$((inc+1));\
MAC=$(cat /sys/class/net/$i/address) ; \
rm -f /etc/sysconfig/network-scripts/ifcfg-eth$inc;\
echo &#34;HWADDR=$MAC&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-eth$inc ;\
echo &#34;DEVICE=eth$inc&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-eth$inc ;\
echo &#34;NAME=eth$inc&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-eth$inc ;\
echo &#34;DEVICETYPE=TeamPort&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-eth$inc ;\
echo &#34;ONBOOT=yes&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-eth$inc ;\
echo &#34;PROMISC=yes&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-eth$inc ;\
echo &#34;TEAM_MASTER=team0&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-eth$inc ;\
echo &#34;NM_CONTROLLED=no&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-eth$inc ;\
done;\
rm -f /etc/sysconfig/network-scripts/ifcfg-team0;\
echo &#34;DEVICE=team0&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-team0 ;\
echo &#34;DEVICETYPE=Team&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-team0 ;\
echo &#34;ONBOOT=yes&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-team0 ;\
echo &#34;BOOTPROTO=none&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-team0 ;\
echo &#34;NM_CONTROLLED=no&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-team0 ;\
echo &#34;IPADDR=192.168.1.120&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-team0 ;\
echo &#34;GATEWAY=192.168.1.254&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-team0 ;\
echo &#34;PREFIX=24&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-team0 ;\
echo &#34;TEAM_CONFIG=&#39;{\&#34;runner\&#34;: {\&#34;name\&#34;: \&#34;loadbalance\&#34;}, \&#34;link_watch\&#34;: {\&#34;name\&#34;: \&#34;ethtool\&#34;} }&#39;&#34; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-team0 ;\
ifup team0;</code></pre></div></div><div class=paragraph><p>CrÃ©ation du service promisc systemd</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>[root@test-server:] inc=&#34;0&#34;;echo &#34;[Unit]&#34; &gt; /etc/systemd/system/promisc.service ;\
echo &#34;Description=Makes an interface run in promiscuous mode at boot&#34; &gt;&gt; /etc/systemd/system/promisc.service ;\
echo &#34;After=network.target&#34;  &gt;&gt; /etc/systemd/system/promisc.service ;\
echo &#34;[Service]&#34;  &gt;&gt; /etc/systemd/system/promisc.service ;\
echo &#34;Type=oneshot&#34; &gt;&gt; /etc/systemd/system/promisc.service ;\
echo &#34;TimeoutStartSec=0&#34; &gt;&gt; /etc/systemd/system/promisc.service ;\
echo &#34;RemainAfterExit=yes&#34; &gt;&gt; /etc/systemd/system/promisc.service ;\
for i in $(find /sys/class/net/* -not -lname &#34;*virtual*&#34; | \
sed -e &#34;s/\// /g&#34; | \
awk &#39;{print $4}&#39; ); do inc=$((inc+1));\
echo &#34;ExecStart=/usr/sbin/ip link set dev eth$inc promisc on&#34; &gt;&gt; /etc/systemd/system/promisc.service ;\
done;\
echo &#34;[Install]&#34; &gt;&gt; /etc/systemd/system/promisc.service ;\
echo &#34;WantedBy=default.target&#34; &gt;&gt; /etc/systemd/system/promisc.service ;\
systemctl daemon-reload;\
systemctl enable promisc;\
systemctl start promisc</code></pre></div></div><div class=paragraph><p>La configuration rÃ©seu des cartes devrait mainetanir contenir le statut "PROMISC" (mÃªme aprÃ¨s un redÃ©marrage du serveur):</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>[root@test-server:] # ip a
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
2: eth1: &lt;BROADCAST,MULTICAST,PROMISC,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast master team0 state UP group default qlen 1000
    link/ether 08:00:27:22:1d:03 brd ff:ff:ff:ff:ff:ff
3: eth2: &lt;BROADCAST,MULTICAST,PROMISC,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast master team0 state UP group default qlen 1000
    link/ether 08:00:27:22:1d:03 brd ff:ff:ff:ff:ff:ff
4: eth3: &lt;BROADCAST,MULTICAST,PROMISC,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast master team0 state UP group default qlen 1000
    link/ether 08:00:27:22:1d:03 brd ff:ff:ff:ff:ff:ff
5: eth4: &lt;BROADCAST,MULTICAST,PROMISC,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast master team0 state UP group default qlen 1000
    link/ether 08:00:27:22:1d:03 brd ff:ff:ff:ff:ff:ff
6: team0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 08:00:27:22:1d:03 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.120/24 brd 192.168.1.255 scope global team0
       valid_lft forever preferred_lft forever</code></pre></div></div></div></div></div></div><h4 class=page-header>Auteur:</h4><figure><img class=avatar src=../../../images/vincent.fr.png alt><figcaption><a href=https://vincent-gou.github.io/authors/vincent-gourrierec/>Vincent Gourrierec</a></figcaption></figure></main><footer><p class="copyright text-muted">2020 - Â© All rights reserved. Powered by <a href=https://gohugo.io>Hugo</a> and <a href=https://github.com/calintat/minimal>Minimal</a> theme and [Vincent Gourrierec] (<a href=https://vincent-gou.fr>https://vincent-gou.fr</a>)</p></footer></body></html>