<!doctype html><html lang=fr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Automatisation deploiement Hugo avec GitHub Actions et GitHub Pages</title><style>html body{font-family:raleway,sans-serif;background-color:#656565}:root{--accent: #cc9933;--border-width:  5px }</style><link rel=stylesheet href=https://www.vincent-gou.fr/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Raleway"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-dark.min.css><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/haskell.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/kotlin.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/scala.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/swift.min.js></script><script>hljs.initHighlightingOnLoad();</script><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script><script>$(document).on('click',function(){$('.collapse').collapse('hide');})</script><meta name=generator content="Hugo 0.79.0"></head><script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><body><a class=flagselect href=/post/automatisation_build_hugo_site_avec_github_actions/>früá´üá∑</a><nav class="navbar navbar-default navbar-fixed-top"><div class=container><div class=navbar-header><a class="navbar-brand visible-xs" href=#>Automatisation deploiement Hugo avec GitHub Actions et GitHub Pages</a>
<button class=navbar-toggle data-target=.navbar-collapse data-toggle=collapse>
<span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href=/>Accueil</a></li><li><a href=/project/>Projets</a></li><li><a href=/post/>Articles</a></li><li><a href=/tags/>Tags</a></li><li><a href=/calendar/>Calendrier</a></li></ul><ul class="nav navbar-nav navbar-right"><li class=navbar-icon><a href=mailto:contact@vincent-gou.fr><i class="fa fa-envelope-o"></i></a></li><li class=navbar-icon><a href=https://github.com/vincent-gou/><i class="fa fa-github"></i></a></li><li class=navbar-icon><a href=https://www.linkedin.com/in/vincent-gou/><i class="fa fa-linkedin"></i></a></li><li class=navbar-icon><a href=https://www.malt.fr/profile/vincentgourrierec/><i class="fa fa-certificate"></i></a></li></ul></div></div></nav><h4 class=page_info>Informations sur la page:</h4><h6 class=page_info>Cet article contient 729 mots.</br>Comptez 4 minutes de temps de lecture</h6><main><div class=item><h4><a href=/post/automatisation_build_hugo_site_avec_github_actions/>Automatisation deploiement Hugo avec GitHub Actions et GitHub Pages</a></h4><h5>November 26, 2020</h5><a href=https://www.vincent-gou.fr/tags/github><kbd class=item-tag>GitHub</kbd></a>
<a href=https://www.vincent-gou.fr/tags/hugo><kbd class=item-tag>Hugo</kbd></a>
<a href=https://www.vincent-gou.fr/tags/asciidoctor><kbd class=item-tag>Asciidoctor</kbd></a>
<a href=https://www.vincent-gou.fr/tags/diagram><kbd class=item-tag>diagram</kbd></a></div><br><div class=text-justify><div class=sect1><h2 id=_objectifs>Objectifs</h2><div class=sectionbody><div class=ulist><ul><li><p>D√©ployer automatiquement un site avec Hugo, le backend Asciidoctor et GitHub Actions</p></li><li><p>Customiser certaines fonctionnalit√©s asciidoctor non int√©gr√©es par Hugo</p></li><li><p>Utiliser un nom de domaine personnel pour son site sous GitHub Pages</p></li></ul></div></div></div><div class=sect1><h2 id=_pr√©_requis>Pr√©-requis</h2><div class=sectionbody><div class=ulist><ul><li><p>Git repository pour votre site Hugo</p></li><li><p>Git repository pour les fichiers g√©n√©r√©s par Hugo</p></li><li><p>Un nom de domaine personnel</p></li><li><p>Acc√®s √† votre console d‚Äôadministration DNS pour cr√©er un sous-domaine et ajouter une nouvelle entr√©e de type CNAME</p></li></ul></div></div></div><div class=sect1><h2 id=_architecture_g√©n√©rale>Architecture g√©n√©rale</h2><div class=sectionbody><div class=imageblock><div class=content><svg viewBox="0 0 832 680" xmlns="http://www.w3.org/2000/svg" xmlns:inkspace="http://www.inkscape.org/namespaces/inkscape" xmlns:xlink="http://www.w3.org/1999/xlink" width="832" height="680"><defs id="defs_block"><filter height="1.504" id="filter_blur" inkspace:collect="always" width="1.1575" x="-.07875" y="-.252"><feGaussianBlur id="feGaussianBlur3780" inkspace:collect="always" stdDeviation="4.2"/></filter></defs><title>blockdiag</title><desc>blockdiag { default_node_color = grey; default_textcolor = white; Dev[shape
= actor, label="Dev"]; Visiteur[shape = actor, label = "Visiteur"]; group
GitHub_Repositories{ label = "GitHub Repositories"; shape = line;
GH_Hugo_Repo[shape = cloud,numbered = "1"]; GH_Pages_Repo[shape =
cloud,numbered = "9"]; } GH_Actions[shape = circle,numbered = "2"];
GH_Actions_Repo[shape = square,numbered = "3"]; Hugo_Actions_Repo[shape =
square,numbered = "4"]; Ruby_Setup[shape = square,numbered = "5"];
Python_Setup[shape = square,numbered = "6"]; Asciidoctor_Setup[shape =
square,numbered = "7"]; Build_Hugo[shape = box,numbered = "8"];
Deploy_Hugo[shape = box,numbered = "10"]; group DNS{ label = "DNS
Infrastructure"; shape = line; DNS_Server[shape = box,numbered = "12"];
Domain_Name_Provider[shape = box,numbered = "11"]; } Dev ->
GH_Hugo_Repo[label = "git push", textcolor="black"]; GH_Hugo_Repo &lt;-
GH_Actions[label = "on push on master", textcolor="black"]; GH_Actions ->
GH_Actions_Repo[label = "pull", textcolor="black"]; GH_Actions ->
Hugo_Actions_Repo[label = "pull", textcolor="black"]; GH_Actions ->
Ruby_Setup[label = "pull", textcolor="black"]; GH_Actions ->
Python_Setup[label = "pull", textcolor="black"]; GH_Actions ->
Asciidoctor_Setup[label = "run", textcolor="black"]; GH_Actions ->
Build_Hugo; Build_Hugo -> GH_Hugo_Repo[label = "pull",
textcolor="black"]; GH_Actions -> Deploy_Hugo; Deploy_Hugo ->
GH_Pages_Repo[label = "push", textcolor="red", color = "red"]; Visiteur
-> DNS_Server [label = "IP ?", textcolor="black"]; Visiteur ->
GH_Pages_Repo; Domain_Name_Provider -> DNS_Server[label = "CNAME",
textcolor="black"]; DNS_Server -> Visiteur[label = "CNAME resolution",
textcolor="yellow", color = "yellow"]; }</desc><polygon fill="rgb(0,0,0)" points="133,60 133,63 143,63 143,66 133,66 133,69 141,78 137,78 131,72 125,78 121,78 129,69 129,66 119,66 119,63 129,63 129,60" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><ellipse cx="131" cy="57" fill="rgb(0,0,0)" rx="4" ry="4" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><polygon fill="rgb(0,0,0)" points="133,620 133,623 143,623 143,626 133,626 133,629 141,638 137,638 131,632 125,638 121,638 129,629 129,626 119,626 119,623 129,623 129,620" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><ellipse cx="131" cy="617" fill="rgb(0,0,0)" rx="4" ry="4" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><path d="M279 62a20 8 0 0120-8 20 6 0 0150 0 20 8 0 0120 8 20 8 0 010 16 20 20 0 01-30 0 20 20 0 01-30 0 20 20 0 01-30 0 20 8 0 010-16" fill="rgb(0,0,0)" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><path d="M279 142a20 8 0 0120-8 20 6 0 0150 0 20 8 0 0120 8 20 8 0 010 16 20 20 0 01-30 0 20 20 0 01-30 0 20 20 0 01-30 0 20 8 0 010-16" fill="rgb(0,0,0)" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1" width="128" x="451" y="606"/><rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1" width="128" x="259" y="606"/><ellipse cx="515" cy="66" fill="rgb(0,0,0)" rx="24" ry="24" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1"/><rect fill="rgb(0,0,0)" height="48" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1" width="48" x="683" y="42"/><rect fill="rgb(0,0,0)" height="48" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1" width="48" x="683" y="122"/><rect fill="rgb(0,0,0)" height="48" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1" width="48" x="683" y="202"/><rect fill="rgb(0,0,0)" height="48" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1" width="48" x="683" y="282"/><rect fill="rgb(0,0,0)" height="48" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1" width="48" x="683" y="362"/><rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1" width="128" x="643" y="446"/><rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:.7;fill-opacity:1" width="128" x="643" y="526"/><polygon fill="rgb(128,128,128)" points="130,54 130,57 140,57 140,60 130,60 130,63 138,72 134,72 128,66 122,72 118,72 126,63 126,60 116,60 116,57 126,57 126,54" stroke="rgb(0,0,0)"/><ellipse cx="128" cy="51" fill="rgb(128,128,128)" rx="4" ry="4" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="18" x="128" y="85">Dev</text><polygon fill="rgb(128,128,128)" points="130,614 130,617 140,617 140,620 130,620 130,623 138,632 134,632 128,626 122,632 118,632 126,623 126,620 116,620 116,617 126,617 126,614" stroke="rgb(0,0,0)"/><ellipse cx="128" cy="611" fill="rgb(128,128,128)" rx="4" ry="4" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="48" x="128" y="645">Visiteur</text><path d="M276 56a20 8 0 0120-8 20 6 0 0150 0 20 8 0 0120 8 20 8 0 010 16 20 20 0 01-30 0 20 20 0 01-30 0 20 20 0 01-30 0 20 8 0 010-16" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="72" x="321" y="66">GH_Hugo_Repo</text><ellipse cx="256" cy="40" fill="pink" rx="12" ry="12" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="6" x="256" y="46">1</text><path d="M276 136a20 8 0 0120-8 20 6 0 0150 0 20 8 0 0120 8 20 8 0 010 16 20 20 0 01-30 0 20 20 0 01-30 0 20 20 0 01-30 0 20 8 0 010-16" fill="rgb(128,128,128)" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="78" x="321" y="146">GH_Pages_Repo</text><ellipse cx="256" cy="120" fill="pink" rx="12" ry="12" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="6" x="256" y="126">9</text><rect fill="rgb(128,128,128)" height="40" stroke="rgb(0,0,0)" width="128" x="448" y="600"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="60" x="512" y="626">DNS_Server</text><ellipse cx="448" cy="600" fill="pink" rx="12" ry="12" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="12" x="448" y="606">12</text><rect fill="rgb(128,128,128)" height="40" stroke="rgb(0,0,0)" width="128" x="256" y="600"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="120" x="320" y="626">Domain_Name_Provider</text><ellipse cx="256" cy="600" fill="pink" rx="12" ry="12" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="12" x="256" y="606">11</text><ellipse cx="512" cy="60" fill="rgb(128,128,128)" rx="24" ry="24" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="48" x="512" y="59">GH_Actio</text><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="12" x="512" y="72">ns</text><ellipse cx="448" cy="40" fill="pink" rx="12" ry="12" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="6" x="448" y="46">2</text><rect fill="rgb(128,128,128)" height="48" stroke="rgb(0,0,0)" width="48" x="680" y="36"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="48" x="704" y="59">GH_Actio</text><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="42" x="704" y="72">ns_Repo</text><ellipse cx="640" cy="40" fill="pink" rx="12" ry="12" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="6" x="640" y="46">3</text><rect fill="rgb(128,128,128)" height="48" stroke="rgb(0,0,0)" width="48" x="680" y="116"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="48" x="704" y="133">Hugo_Act</text><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="48" x="704" y="146">ions_Rep</text><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="6" x="704" y="159">o</text><ellipse cx="640" cy="120" fill="pink" rx="12" ry="12" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="6" x="640" y="126">4</text><rect fill="rgb(128,128,128)" height="48" stroke="rgb(0,0,0)" width="48" x="680" y="196"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="48" x="704" y="219">Ruby_Set</text><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="12" x="704" y="232">up</text><ellipse cx="640" cy="200" fill="pink" rx="12" ry="12" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="6" x="640" y="206">5</text><rect fill="rgb(128,128,128)" height="48" stroke="rgb(0,0,0)" width="48" x="680" y="276"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="48" x="704" y="299">Python_S</text><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="24" x="704" y="312">etup</text><ellipse cx="640" cy="280" fill="pink" rx="12" ry="12" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="6" x="640" y="286">6</text><rect fill="rgb(128,128,128)" height="48" stroke="rgb(0,0,0)" width="48" x="680" y="356"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="48" x="704" y="373">Asciidoc</text><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="48" x="704" y="386">tor_Setu</text><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="6" x="704" y="399">p</text><ellipse cx="640" cy="360" fill="pink" rx="12" ry="12" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="6" x="640" y="366">7</text><rect fill="rgb(128,128,128)" height="40" stroke="rgb(0,0,0)" width="128" x="640" y="440"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="60" x="704" y="466">Build_Hugo</text><ellipse cx="640" cy="440" fill="pink" rx="12" ry="12" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="6" x="640" y="446">8</text><rect fill="rgb(128,128,128)" height="40" stroke="rgb(0,0,0)" width="128" x="640" y="520"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="66" x="704" y="546">Deploy_Hugo</text><ellipse cx="640" cy="520" fill="pink" rx="12" ry="12" stroke="rgb(0,0,0)"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="12" x="640" y="526">10</text><path d="M140 60H248" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="255,60 248,56 248,64 255,60" stroke="rgb(0,0,0)"/><path d="M140 620h84" fill="none" stroke="rgb(0,0,0)"/><path d="M224 620v40" fill="none" stroke="rgb(0,0,0)"/><path d="M224 660H432" fill="none" stroke="rgb(0,0,0)"/><path d="M432 660V620" fill="none" stroke="rgb(0,0,0)"/><path d="M432 620h8" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="447,620 440,616 440,624 447,620" stroke="rgb(0,0,0)"/><path d="M140 620H240" fill="none" stroke="rgb(0,0,0)"/><path d="M240 620V140" fill="none" stroke="rgb(0,0,0)"/><path d="M240 140h8" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="255,140 248,136 248,144 255,140" stroke="rgb(0,0,0)"/><path d="M536 60H672" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="679,60 672,56 672,64 679,60" stroke="rgb(0,0,0)"/><path d="M536 60h72" fill="none" stroke="rgb(0,0,0)"/><path d="M608 60v80" fill="none" stroke="rgb(0,0,0)"/><path d="M608 140h64" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="679,140 672,136 672,144 679,140" stroke="rgb(0,0,0)"/><path d="M536 60h72" fill="none" stroke="rgb(0,0,0)"/><path d="M608 60V220" fill="none" stroke="rgb(0,0,0)"/><path d="M608 220h64" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="679,220 672,216 672,224 679,220" stroke="rgb(0,0,0)"/><path d="M536 60h72" fill="none" stroke="rgb(0,0,0)"/><path d="M608 60V3e2" fill="none" stroke="rgb(0,0,0)"/><path d="M608 3e2h64" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="679,300 672,296 672,304 679,300" stroke="rgb(0,0,0)"/><path d="M536 60h72" fill="none" stroke="rgb(0,0,0)"/><path d="M608 60V380" fill="none" stroke="rgb(0,0,0)"/><path d="M608 380h64" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="679,380 672,376 672,384 679,380" stroke="rgb(0,0,0)"/><path d="M536 60h72" fill="none" stroke="rgb(0,0,0)"/><path d="M608 60V460" fill="none" stroke="rgb(0,0,0)"/><path d="M608 460h24" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="639,460 632,456 632,464 639,460" stroke="rgb(0,0,0)"/><path d="M536 60h72" fill="none" stroke="rgb(0,0,0)"/><path d="M608 60V540" fill="none" stroke="rgb(0,0,0)"/><path d="M608 540h24" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="639,540 632,536 632,544 639,540" stroke="rgb(0,0,0)"/><path d="M768 460h16" fill="none" stroke="rgb(0,0,0)"/><path d="M784 460V25" fill="none" stroke="rgb(0,0,0)"/><path d="M320 25H784" fill="none" stroke="rgb(0,0,0)"/><path d="M320 25v7" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="320,39 316,32 324,32 320,39" stroke="rgb(0,0,0)"/><path d="M768 540h16" fill="none" stroke="rgb(255,0,0)"/><path d="M784 540V105" fill="none" stroke="rgb(255,0,0)"/><path d="M320 105H604" fill="none" stroke="rgb(255,0,0)"/><path d="M604 105a4 4 0 018 0" fill="none" stroke="rgb(255,0,0)"/><path d="M612 105H784" fill="none" stroke="rgb(255,0,0)"/><path d="M320 105v7" fill="none" stroke="rgb(255,0,0)"/><polygon fill="rgb(255,0,0)" points="320,119 316,112 324,112 320,119" stroke="rgb(255,0,0)"/><path d="M392 60h96" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="385,60 392,56 392,64 385,60" stroke="rgb(0,0,0)"/><path d="M576 620h16" fill="none" stroke="rgb(255,255,0)"/><path d="M592 620V585" fill="none" stroke="rgb(255,255,0)"/><path d="M128 585H236" fill="none" stroke="rgb(255,255,0)"/><path d="M236 585a4 4 0 018 0" fill="none" stroke="rgb(255,255,0)"/><path d="M244 585H592" fill="none" stroke="rgb(255,255,0)"/><path d="M128 585v14" fill="none" stroke="rgb(255,255,0)"/><polygon fill="rgb(255,255,0)" points="128,606 124,599 132,599 128,606" stroke="rgb(255,255,0)"/><path d="M384 620h56" fill="none" stroke="rgb(0,0,0)"/><polygon fill="rgb(0,0,0)" points="447,620 440,616 440,624 447,620" stroke="rgb(0,0,0)"/><rect fill="#fff" height="15" stroke="rgb(0,0,0)" width="64" x="192" y="38"/><text fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="48" x="224" y="51">git push</text><rect fill="#fff" height="15" stroke="rgb(0,0,0)" width="40" x="300" y="643"/><text fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="24" x="320" y="656">IP ?</text><rect fill="#fff" height="15" stroke="rgb(0,0,0)" width="40" x="588" y="38"/><text fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="24" x="608" y="51">pull</text><rect fill="#fff" height="15" stroke="rgb(0,0,0)" width="40" x="588" y="118"/><text fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="24" x="608" y="131">pull</text><rect fill="#fff" height="15" stroke="rgb(0,0,0)" width="40" x="588" y="198"/><text fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="24" x="608" y="211">pull</text><rect fill="#fff" height="15" stroke="rgb(0,0,0)" width="40" x="588" y="278"/><text fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="24" x="608" y="291">pull</text><rect fill="#fff" height="15" stroke="rgb(0,0,0)" width="34" x="591" y="358"/><text fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="18" x="608" y="371">run</text><rect fill="#fff" height="15" stroke="rgb(0,0,0)" width="40" x="764" y="423"/><text fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="24" x="784" y="436">pull</text><rect fill="#fff" height="15" stroke="rgb(0,0,0)" width="40" x="764" y="503"/><text fill="red" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="24" x="784" y="516">push</text><rect fill="#fff" height="15" stroke="rgb(0,0,0)" width="64" x="384" y="38"/><text fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="48" x="416" y="51">on p ...</text><rect fill="#fff" height="15" stroke="rgb(0,0,0)" width="64" x="528" y="563"/><text fill="#ff0" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="48" x="560" y="576">CNAM ...</text><rect fill="#fff" height="15" stroke="rgb(0,0,0)" width="46" x="393" y="598"/><text fill="#000" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="30" x="416" y="611">CNAME</text><rect fill="none" height="140" stroke="rgb(243,152,0)" stroke-width="3" width="144" x="248" y="30"/><rect fill="none" height="60" stroke="rgb(243,152,0)" stroke-width="3" width="336" x="248" y="590"/><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="114" x="320" y="36">GitHub Repositories</text><text fill="rgb(255,255,255)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="108" x="416" y="596">DNS Infrastructure</text></svg></div></div></div></div><div class=sect1><h2 id=_repository_github>Repository GitHub</h2><div class=sectionbody><div class=sect2><h3 id=_repository_hugo>Repository Hugo</h3><div class=paragraph><p>Ce repository contiendra le contenu source de votre site, la configuration, le theme et les pages qui seront g√©n√©r√©es par Hugo.
Le resultat du build Hugo sera d√©ploy√© dans le repository d√©di√© √† GitHub Pages.</p></div><div class=paragraph><p>Exemple de structure du dossier d√©di√© aux sources Hugo:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>[someone@server:Hugo] # tree -L 2
.
|-- archetypes
|   `-- default.md
|-- config.toml
|-- content
|   |-- authors
|   |-- bin
|   |-- calendar
|   |-- images
|   |-- post
|   `-- project
|-- static
|   |-- CNAME
|   |-- css
|   |-- js
|   `-- README.md
`-- themes
    `-- minimal

13 directories, 4 files</code></pre></div></div></div><div class=sect2><h3 id=_repository_github_pages>Repository GitHub Pages</h3><div class=paragraph><p>Ce repository contiendra le contenu de votre site g√©n√©r√© par Hugo et d√©ploy√© par GitHub Actions.</p></div><div class=paragraph><p>Exemple de structure du dossier:</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><div class=title>Warning</div></td><td class=content>Le contenu de ce dossier est purg√© √† chaque d√©ploiement.</td></tr></tbody></table></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>[someone@server:someone.github.io] # tree -L 1
.
|-- 404.html
|-- authors
|-- bin
|-- calendar
|-- categories
|-- CNAME
|-- css
|-- en
|-- fr
|-- images
|-- index.html
|-- index.xml
|-- js
|-- post
|-- project
|-- README.md
|-- sitemap.xml
`-- tags

12 directories, 6 files</code></pre></div></div></div></div></div><div class=sect1><h2 id=_param√©trage_github_actions>Param√©trage GitHub Actions</h2><div class=sectionbody></div></div><div class=sect1><h2 id=_param√©trage_dns>Param√©trage DNS</h2><div class=sectionbody></div></div><div class=sect1><h2 id=_param√©trage_de_votre_nom_de_domaine_customis√©>Param√©trage de votre nom de domaine customis√©</h2><div class=sectionbody><div class=sect2><h3 id=_cas_avec_fichier_cname>Cas avec fichier CNAME</h3><div class=paragraph><p>Si vous utilisez un repository pour les sources Hugo, il suffit de cr√©er un fichier CNAME sous votre dossier "static".</p></div><div class=paragraph><p>Le fichier ne doit contenir que votre nom de domaine customis√©:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>www.custom_domain.xy</code></pre></div></div></div><div class=sect2><h3 id=_cas_avec_linterface_dadministration_de_github_pages>Cas avec l‚Äôinterface d‚Äôadministration de GitHub Pages</h3><div class="admonitionblock warning"><table><tbody><tr><td class=icon><div class=title>Warning</div></td><td class=content>Ne pas utiliser car le fichier CNAME sera supprim√© √† chaque push apr√®s le build "hugo_deploy" provenant de GitHub Actions.</td></tr></tbody></table></div></div><div class=sect2><h3 id=_cas_avec_github_actions_et_le_param√®tre_cname>Cas avec GitHub Actions et le param√®tre cname</h3><div class=paragraph><p>Si vous utilisez le repo peaceiris/actions-gh-pages, vous pouvez ajouter le param√®tre suivant dans fichier GitHub Actions:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>- name: Deploy
  uses: peaceiris/actions-gh-pages@v2
  env:
    ACTIONS_DEPLOY_KEY: ${{ secrets.ACTIONS_DEPLOY_KEY }}
    EXTERNAL_REPOSITORY: username/username.github.io
    PUBLISH_BRANCH: master
    PUBLISH_DIR: ./public
    cname: www.custom_domain.xy
  with:
    emptyCommits: false
    commitMessage: ${{ github.event.head_commit.message }}</code></pre></div></div></div><div class=sect2><h3 id=_param√©trage_dns_dans_linterface_de_votre_provider_dns>Param√©trage DNS dans l‚Äôinterface de votre provider DNS</h3><div class="admonitionblock warning"><table><tbody><tr><td class=icon><div class=title>Warning</div></td><td class=content>Les copies d‚Äô√©cran concernent un panel d‚Äôadministration DNS chez OVH.</td></tr></tbody></table></div><div class=ulist><ul><li><p>Connectez vous √† votre interface d‚Äôadministration DNS</p></li><li><p>S√©lectionnez votre domaine si vous en g√©rez plusieurs</p></li></ul></div><div class="imageblock right text-center"><div class=content><img src=../../images/Automatisation_Build_Hugo_site_avec_GitHUb_Actions.fr-f4820.png alt=200 width=200></div></div><div class=ulist><ul><li><p>S√©lectionner "Zone DNS"</p></li></ul></div><div class="imageblock right text-center"><div class=content><img src=../../images/Automatisation_Build_Hugo_site_avec_GitHUb_Actions.fr-f7562.png alt=200 width=200></div></div><div class=ulist><ul><li><p>Puis s√©lectionnez ajoutez une entr√©e, s√©lectionnez "CNAME"</p></li></ul></div><div class="imageblock right text-center"><div class=content><img src=../../images/Automatisation_Build_Hugo_site_avec_GitHUb_Actions.fr-414c6.png alt=200 width=200></div></div><div class=ulist><ul><li><p>Ensuite remplissez le formulaire permettant de rediriger votre site vers le site GitHub pages de la forme: username.github.io</p></li></ul></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><div class=title>Note</div></td><td class=content>il faudra peut-etre ajouter un "." au domaine de redirection, par exemple: username.github.io.</td></tr></tbody></table></div><div class="imageblock right text-center"><div class=content><img src=../../images/Automatisation_Build_Hugo_site_avec_GitHUb_Actions.fr-eee79.png alt=200 width=200></div></div><div class=ulist><ul><li><p>Puis validez votre entr√©e</p></li></ul></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><div class=title>Note</div></td><td class=content>Quelques minutes voire plus peuvent √™tre n√©cessaire pour r√©pliquer votre nouvelle entr√©e vers les diff√©rents serveurs DNS.</td></tr></tbody></table></div></div></div></div></div><h4 class=page-header>Auteur:</h4><figure><img class=avatar src=../../../images/vincent.fr.png alt><figcaption><a href=https://www.vincent-gou.fr/authors/vincent-gourrierec/>Vincent Gourrierec</a></figcaption></figure></main><footer><p class=copyright>2020 - ¬© All rights reserved. Powered by <a href=https://gohugo.io>Hugo</a> and <a href=https://github.com/calintat/minimal>Minimal</a> theme, build with GitHub Actions <img src=https://github.com/vincent-gou/Hugo/workflows/hugo%20publish/badge.svg alt="hugo publish"> and <a href=https://www.vincent-gou.fr>Vincent Gourrierec</a></p></footer></body></html>